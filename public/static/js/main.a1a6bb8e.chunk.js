(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5429:function(e,t,n){e.exports=n(5569)},5568:function(e,t,n){},5569:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),c=n.n(o),i=n(29),s=n(9),l=n.n(s),u=n(10),p=n.n(u),d=n(17),h={API_URL:"/api",VAPID_PUBKEY:"BBSBOIj17PEWrpy6vO6DI0voM1186Mv3VKaD2k91fCnKD1F8uEo6LMIk-aqSx3sF-glNrHYE1cpcA1YowLyh4BY"},f="REQUEST_CALENDAR",m="RECEIVE_CALENDAR",v="RECEIVE_CALENDAR_ERROR",E=h.API_URL,g=function(e){return{month:e,type:f}},b=function(e,t){return{data:t,month:e,type:m}},y=function(e){return{error:e,type:v}},w=function(e){return function(){var t=Object(d.a)(p.a.mark(function t(n){var a,r,o,c;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(g(e)),t.prev=1,t.next=4,fetch("".concat(E,"/calendar?month=").concat(e),{method:"GET",credentials:"same-origin"});case 4:if(!((a=t.sent).status>=200&&a.status<=300)){t.next=11;break}return t.next=8,a.json();case 8:return r=t.sent,o=r.data,t.abrupt("return",n(b(e,o)));case 11:return t.next=13,a.text();case 13:return c=t.sent,t.abrupt("return",n(y(c)));case 17:return t.prev=17,t.t0=t.catch(1),t.abrupt("return",n(y(t.t0.message)));case 20:case"end":return t.stop()}},t,null,[[1,17]])}));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(t){return t(w(e))}},O=n(22),D="REQUEST_ADD_EVENT",C="RECEIVE_ADD_EVENT",x="REQUEST_UPDATE_EVENT",k="RECEIVE_UPDATE_EVENT",Y="REQUEST_DELETE_EVENT",S="RECEIVE_DELETE_EVENT",M="REQUEST_DAY",T="RECEIVE_DAY",N="RECEIVE_DAY_ERROR",A=h.API_URL,R=function(e){return{date:e,type:M}},F=function(e,t){return{data:t,date:e,type:T}},I=function(e){return{error:e,type:N}},_=function(e){return function(t){return t(function(e){return function(){var t=Object(d.a)(p.a.mark(function t(n){var a,r,o,c;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(R(e)),t.prev=1,t.next=4,fetch("".concat(A,"/day?date=").concat(e),{method:"GET",credentials:"same-origin"});case 4:if(!((a=t.sent).status>=200&&a.status<=300)){t.next=11;break}return t.next=8,a.json();case 8:return r=t.sent,o=r.data,t.abrupt("return",n(F(e,o)));case 11:return t.next=13,a.text();case 13:return c=t.sent,t.abrupt("return",n(I(c)));case 17:return t.prev=17,t.t0=t.catch(1),t.abrupt("return",n(I(t.t0.message)));case 20:case"end":return t.stop()}},t,null,[[1,17]])}));return function(e){return t.apply(this,arguments)}}()}(e))}},B=function(e){return function(t){return t(function(e){return function(){var t=Object(d.a)(p.a.mark(function t(n){var a,r;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:Y}),t.next=3,fetch("".concat(A,"/event/").concat(e),{method:"DELETE",credentials:"same-origin"});case 3:return a=t.sent,t.next=6,a.json();case 6:return r=t.sent,n({deletedEventId:r.id,type:S}),t.abrupt("return",r);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(e))}},P=function(e){return function(t){return t((n=e,function(){var e=Object(d.a)(p.a.mark(function e(t){var a,r,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:D}),e.next=3,fetch("".concat(A,"/event"),{body:JSON.stringify(n),credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,o=r.id,e.abrupt("return",t({data:Object(O.a)({id:o},n),type:C}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));var n}},L=function(e){return function(t){return t((n=e,function(){var e=Object(d.a)(p.a.mark(function e(t){var a,r,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:x}),e.next=3,fetch("".concat(A,"/event/").concat(n.id),{body:JSON.stringify(n),credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT"});case 3:return a=e.sent,e.next=6,a.json();case 6:return r=e.sent,o=r.id,e.abrupt("return",t({data:Object(O.a)({id:o},n),type:k}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));var n}},U=n(26),V=n(27),W=n(30),H=n(28),G=n(31),K=n(19),J=n(20),Q=n.n(J),q=n(51),z=n(41),$=n(5),X=n.n($),Z=["Mon","Thu","Wed","Thr","Fri","Sat","Sun"],ee=function(e,t){return e.isSame(l()(t),"day")},te=function(e,t){return!e.isSame(l()(t),"month")},ne=function(e){function t(){return Object(U.a)(this,t),Object(W.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(G.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatchFetchCalendar(l()(Date.now()))}},{key:"handleSelectedDayChange",value:function(e){this.props.dispatchFetchDay(l()(e)),l()(e).isSame(this.props.month,"month")||this.props.dispatchFetchCalendar(l()(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.error,o=t.isFetching,c=t.selectedDay,i=void 0===c?l()(Date.now()):c,s=t.list,u=void 0===s?[]:s,p=t.month;if(!n)throw new Error("error loading styles");return o?r.a.createElement("div",{className:n.loader},"Loading..."):a?r.a.createElement("div",{className:n.loader},a):r.a.createElement("div",{className:n.root},Z.map(function(e){return r.a.createElement(z.a,{key:e},r.a.createElement(Q.a,{variant:"h6",gutterBottom:!0},e))}),u.map(function(t){var a,o=t.date,c=t.events;return r.a.createElement(z.a,{key:o,className:X()((a={},Object(q.a)(a,n.selected,ee(i,o)),Object(q.a)(a,n.outOfMonth,te(l()(p),o)),a),n.day),onClick:function(){return e.handleSelectedDayChange(o)}},r.a.createElement(Q.a,{variant:"h6",gutterBottom:!0},l()(o).format("DD")),r.a.createElement("div",null,Array.from({length:3}).map(function(e,t){return r.a.createElement(Q.a,{variant:"caption",key:c&&c[t]?c[t].id:t,className:n.eventTitle,gutterBottom:!0},c&&c[t]?c[t].title:r.a.createElement("div",null,"\xa0"))})))}))}}]),t}(a.Component),ae=Object(K.withStyles)(function(e){return{day:{"&:hover":{background:"#eee"},border:"solid 1px #eee",color:e.palette.text.secondary},eventTitle:{whiteSpace:"nowrap"},loader:{height:81*e.spacing.unit,width:"100%"},outOfMonth:{background:"#ededed"},root:{display:"grid",gridTemplateColumns:"14.28% 14.28% 14.28% 14.28% 14.28% 14.28% 14.28%",gridTemplateRows:"16.66% 16.66% 16.66% 16.66% 16.66% 16.66%%",width:"100%"},selected:{background:"#eee"}}})(ne),re=Object(i.b)(function(e){var t=e.day,n=e.calendar;return Object(O.a)({},n,{selectedDay:l()(t.date)})},function(e){return{dispatchFetchDay:function(t){return e(_(t.format("YYYY-MM-DD")))},dispatchFetchCalendar:function(t){return e(j(t.format("YYYY-MM")))}}})(ae),oe=n(68),ce=n.n(oe),ie=n(23),se=n.n(ie),le=n(69),ue=n.n(le),pe=n(62),de=n.n(pe),he=n(66),fe=n.n(he),me=n(63),ve=n.n(me),Ee=n(42),ge=n.n(Ee),be=n(64),ye=n.n(be),we=n(65),je=n.n(we),Oe=n(43),De=n.n(Oe),Ce=n(67),xe=n.n(Ce),ke=n(52),Ye=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).state={event:n.props.event||{description:"",notification:!1,time:l()(n.props.selectedDay).format("YYYY-MM-DDTHH:mm"),title:""},open:!1},n.handleClickOpen=function(){n.setState({event:n.props.event||{description:"",notification:!1,time:l()(n.props.selectedDay).format("YYYY-MM-DDTHH:mm"),title:""},open:!0})},n.handleClose=function(){n.setState({event:{description:"",notification:!1,time:l()(n.props.selectedDay).format("YYYY-MM-DDTHH:mm"),title:""},open:!1})},n.handleEventTimeChange=function(e){n.setState({event:Object(O.a)({},n.state.event,{time:l()(e.target.value).format("YYYY-MM-DDTHH:mm")})})},n.handleEventTitleChange=function(e){n.setState({event:Object(O.a)({},n.state.event,{title:e.target.value})})},n.handleEventDescriptionChange=function(e){n.setState({event:Object(O.a)({},n.state.event,{description:e.target.value})})},n.handleEventNotificationChange=function(e){n.setState({event:Object(O.a)({},n.state.event,{notification:e.target.checked})})},n.handleSave=function(){n.props.onSave(n.state.event),n.handleClose()},n}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.fullScreen,a=e.event,o=e.fabButtonClassName,c=this.state,i=c.open,s=c.event,l=s.description,u=s.time,p=s.title,d=s.notification;if(!t)throw new Error("error loading styles");return r.a.createElement("div",{className:t.root},r.a.createElement(ge.a,{color:"secondary","aria-label":"Open editor",onClick:this.handleClickOpen,className:o},a?r.a.createElement(ke.c,null):r.a.createElement(ke.a,null)),r.a.createElement(de.a,{fullScreen:n,open:i,onClose:this.handleClose},r.a.createElement(ve.a,{className:t.dialogContent},r.a.createElement("div",{className:t.firstRow},r.a.createElement(De.a,{value:u,onChange:this.handleEventTimeChange,label:"Time",type:"datetime-local",placeholder:"Enter event time",helperText:"Event time",margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0}}),r.a.createElement(ye.a,{control:r.a.createElement(je.a,{onChange:this.handleEventNotificationChange,checked:d,value:"notification",color:"primary"}),label:"Notification"})),r.a.createElement(De.a,{value:p,onChange:this.handleEventTitleChange,label:"Title",placeholder:"Enter event title",helperText:"Event title",margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},fullWidth:!0}),r.a.createElement(De.a,{value:l,onChange:this.handleEventDescriptionChange,label:"Description",placeholder:"Enter event description",helperText:"Event description",margin:"normal",variant:"outlined",rows:"4",InputLabelProps:{shrink:!0},fullWidth:!0,multiline:!0})),r.a.createElement(fe.a,null,r.a.createElement(se.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(se.a,{onClick:this.handleSave,color:"primary",autoFocus:!0},"Save"))))}}]),t}(a.Component),Se=Object(K.withStyles)(function(e){return{dialogContent:{minWidth:10*e.spacing.unit*5},firstRow:{display:"flex",justifyContent:"space-between"},root:{margin:2*e.spacing.unit}}})(xe()({breakpoint:"xs"})(Ye)),Me=Object(K.withStyles)(function(e){return{appBar:{bottom:0,top:"auto"},fabButton:{left:0,margin:"0 auto",position:"absolute",right:0,top:-1*e.spacing.unit,zIndex:1},toolbar:{alignItems:"center",justifyContent:"space-between"}}})(function(e){var t=e.classes,n=e.selectedDay,a=e.onPrev,o=e.onNext,c=e.onSave;return t&&r.a.createElement(ce.a,{position:"relative",color:"primary",className:t.appBar},r.a.createElement(ue.a,{className:t.toolbar},r.a.createElement(se.a,{color:"inherit","aria-label":"previous month",onClick:a},l()(n).subtract(1,"month").format("MMMM")),r.a.createElement(Se,{selectedDay:n,fabButtonClassName:t.fabButton,onSave:c}),r.a.createElement("div",null,r.a.createElement(se.a,{color:"inherit","aria-label":"next month",onClick:o},l()(n).add(1,"month").format("MMMM")))))}),Te=n(72),Ne=n.n(Te),Ae=n(50),Re=n.n(Ae),Fe=n(70),Ie=n.n(Fe),_e=n(71),Be=n.n(_e),Pe=n(73),Le=n.n(Pe),Ue=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleSave=function(){var e=Object(d.a)(p.a.mark(function e(t){var a,r,o;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.dispatchUpdateEvent,o=a.dispatchRefetchCalendar,e.next=3,r(t);case 3:o();case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(G.a)(t,e),Object(V.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatchFetchDay(l()(this.props.date))}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=t.error,c=t.isFetching,i=t.list,s=void 0===i?[]:i,u=t.dispatchDeleteEvent,h=t.dispatchRefetchCalendar;if(!n)throw new Error("error loading styles");return c?r.a.createElement("div",{className:n.loader},"Loading..."):o?r.a.createElement("div",{className:n.loader},o):r.a.createElement(Re.a,{className:n.root},s.map(function(t){return r.a.createElement(Ie.a,{key:t.id},r.a.createElement(Be.a,null,r.a.createElement(Ne.a,null,r.a.createElement(Q.a,{variant:"button"},l()(t.time).format("H:mm")))),r.a.createElement(Le.a,{secondaryTypographyProps:{component:"div"},primary:t.title,secondary:r.a.createElement(a.Fragment,null,r.a.createElement(Q.a,{component:"div",color:"textPrimary"},t.description),r.a.createElement("div",{className:n.actions},r.a.createElement("div",{className:n.flexGrow}),r.a.createElement("div",{className:n.deleteButtonWrapper},r.a.createElement(ge.a,{"aria-label":"Delete",color:"primary",onClick:Object(d.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(t.id);case 2:h();case 3:case"end":return e.stop()}},e)}))},r.a.createElement(ke.b,null))),r.a.createElement(Se,{event:t,onSave:e.handleSave})))}))}))}}]),t}(a.Component),Ve=Object(K.withStyles)(function(e){return{actions:{display:"flex"},deleteButtonWrapper:{margin:2*e.spacing.unit},flexGrow:{flexGrow:1},loader:{height:81*e.spacing.unit,width:"100%"},root:{backgroundColor:e.palette.background.paper,width:"100%"}}})(Ue),We=Object(i.b)(function(e){return e.day},function(e){return{dispatchFetchDay:function(t){e(_(t.format("YYYY-MM-DD")))},dispatchDeleteEvent:function(t){return e(B(t))},dispatchUpdateEvent:function(t){return e(L(t))},dispatchRefetchCalendar:function(){e(function(e,t){var n=t().calendar.month;return e(w(n))})}}})(Ve),He=function(e){function t(){var e,n;Object(U.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(W.a)(this,(e=Object(H.a)(t)).call.apply(e,[this].concat(r)))).handleSave=function(){var e=Object(d.a)(p.a.mark(function e(t){var a,r,o,c;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props,r=a.dispatchAddEvent,o=a.dispatchFetchCalendar,c=a.month,e.next=3,r(t);case 3:o(c);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.handlePrevMonth=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.selectedDay.subtract(1,"month"),e.next=3,n.props.dispatchFetchCalendar(t);case 3:return e.next=5,n.props.dispatchFetchDay(t);case 5:case"end":return e.stop()}},e)})),n.handleNextMonth=Object(d.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.selectedDay.add(1,"month"),e.next=3,n.props.dispatchFetchCalendar(t);case 3:return e.next=5,n.props.dispatchFetchDay(t);case 5:case"end":return e.stop()}},e)})),n}return Object(G.a)(t,e),Object(V.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.month,a=e.selectedDay;if(!t)throw new Error("error loading styles");return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.content},r.a.createElement(Q.a,{variant:"h2",gutterBottom:!0,className:t.header},n.format("MMMM YYYY")),r.a.createElement(re,null),r.a.createElement(Me,{selectedDay:a,onNext:this.handleNextMonth,onPrev:this.handlePrevMonth,onSave:this.handleSave}),r.a.createElement(We,null)))}}]),t}(a.Component),Ge=Object(K.withStyles)(function(e){return{appBar:{bottom:0,top:"auto"},content:{alignItems:"center",display:"flex",flexDirection:"column",flexGrow:1,justifyContent:"center",marginLeft:e.spacing.unit,marginRight:e.spacing.unit},fabButton:{left:0,margin:"0 auto",position:"absolute",right:0,top:-30,zIndex:1},header:{},root:{display:"flex",flexDirection:"column",flexWrap:"wrap",margin:"0 auto",maxWidth:10*e.spacing.unit*10,position:"relative"},toolbar:{alignItems:"center",justifyContent:"space-between"}}})(He),Ke=Object(i.b)(function(e){var t=e.day,n=e.calendar;return{month:l()(n.month),selectedDay:l()(t.date)}},function(e){return{dispatchFetchDay:function(t){e(_(t.format("YYYY-MM-DD")))},dispatchFetchCalendar:function(t){e(j(t.format("YYYY-MM")))},dispatchAddEvent:function(t){return e(P(t))}}})(Ge),Je=(n(5568),n(34)),Qe=n(145),qe=n(146);var ze=n(106);var $e=Object(Je.c)({calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{error:null,isFetching:!1,list:[],month:l()(Date.now()).format("YYYY-MM")},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object.assign({},e,{isFetching:!0,month:t.month});case m:return Object.assign({},e,{isFetching:!1,list:t.data});case v:return Object.assign({},e,{isFetching:!1,error:t.error});default:return e}},day:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{date:l()(Date.now()).format("YYYY-MM-DD"),error:null,isFetching:!1,list:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object.assign({},e,{date:t.date,error:null,isFetching:!0,list:[]});case T:return Object.assign({},e,{isFetching:!1,list:t.data});case N:return Object.assign({},e,{isFetching:!1,error:t.error});case S:return Object.assign({},e,{list:e.list.filter(function(e){return e.id!==t.deletedEventId})});case k:return Object.assign({},e,{list:[t.data].concat(Object(ze.a)(e.list.filter(function(e){return e.id!==t.data.id})))});case C:return Object.assign({},e,{list:[t.data].concat(Object(ze.a)(e.list))});case D:case x:case Y:default:return e}}}),Xe=Object(Qe.createLogger)(),Ze=Object(Je.d)($e,Object(Je.a)(qe.a,Xe)),et="BBSBOIj17PEWrpy6vO6DI0voM1186Mv3VKaD2k91fCnKD1F8uEo6LMIk-aqSx3sF-glNrHYE1cpcA1YowLyh4BY",tt=h.API_URL;function nt(e){return at.apply(this,arguments)}function at(){return(at=Object(d.a)(p.a.mark(function e(t){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.pushManager.subscribe({applicationServerKey:rt(et),userVisibleOnly:!0});case 3:return n=e.sent,e.next=6,fetch("".concat(tt,"/notifications"),{body:JSON.stringify({data:n}),credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error("cannot register subscription | ".concat(e.t0));case 11:case"end":return e.stop()}},e,null,[[0,8]])}))).apply(this,arguments)}function rt(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),n=window.atob(t),a=new Uint8Array(n.length),r=0;r<n.length;++r)a[r]=n.charCodeAt(r);return a}var ot=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ct(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/notifications-worker.js");ot?(!function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):it(e,t)}).catch(function(){console.info("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.info("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):it(t,e)})}}function it(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"activated"===n.state&&t&&t.onActivated&&t.onActivated(e),"installed"===n.state&&(navigator.serviceWorker.controller?(console.info("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.info("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement(i.a,{store:Ze},r.a.createElement(Ke,null)),document.getElementById("root")),ct({onActivated:nt,onUpdate:nt})}},[[5429,1,2]]]);
//# sourceMappingURL=main.a1a6bb8e.chunk.js.map